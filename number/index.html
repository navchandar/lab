<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Incrementor</title>
    <meta name="description" content="A simple interactive number incrementor that changes color on key press or tap.">
    <meta name="keywords" content="numbers, flash, colors, increment, counter, interactive, JavaScript, mobile-friendly">
    <meta name="author" content="Naveenchandar">
    <meta property="og:title" content="Number Incrementor">
    <meta property="og:description" content="A fun and responsive number incrementor that changes color with each interaction.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://navchandar.github.io/lab/number">
    <meta property="og:image" content="https://navchandar.github.io/lab/number/preview.gif">
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #4e4e4e;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        #number {
            /* Center the number within this container */
            display: flex;
            justify-content: center;
            align-items: center;

            font-size: 15em; 
            color: black;
            user-select: none;
            cursor: pointer;
            -webkit-text-stroke: 2px #333;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.5);
            line-height: 1; 


            /* Paper-like background styles */
            background-color: lightgrey;
            background-image:
                repeating-linear-gradient(
                    0deg,
                    #eee 0.5px,
                    transparent 0.5px,
                    transparent 20px
                ),
                repeating-linear-gradient(
                    180deg,
                    #000 0.1px,
                    transparent 0.5px,
                    transparent 20px
                );
            background-size: 20px 20px; 
            box-shadow:
                0 1px 1px rgba(0, 0, 0, 0.1), 
                0 8px 16px rgba(0, 0, 0, 0.3);
            border-radius: 10px 40px 40px 10px;
            position: relative;
            overflow: hidden;
        }

        /* Styles for the mute button */
        #muteButton {
            position: fixed; /* Fixed position relative to the viewport */
            bottom: 20px;    /* 20px from the bottom */
            right: 20px;     /* 20px from the right */
            background-color: #6c757d; /* Grayish button */
            color: white;
            border: none;
            border-radius: 50%; /* Make it a circle */
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000; /* Ensure it's above other elements */
            transition: background-color 0.3s ease;
        }

        #muteButton:hover {
            background-color: #5a6268;
        }

        /* Styles for mobile devices */
        @media (max-width: 767px) { 
            #number {
                width: 250px;
                height: 400px; 
                font-size: 8em; 
                -webkit-text-stroke: 1px #333;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            }
            #muteButton {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
                bottom: 10px;
                right: 10px;
            }
        }

        /* Styles for desktop */
        @media (min-width: 768px) { 
            #number {
                width: 600px;
                height: 720px;
                font-size: 18em;
                -webkit-text-stroke: 3px #333;
                text-shadow: 6px 6px 12px rgba(0, 0, 0, 0.75);
            }
        }
    </style>
</head>
<body>
    <div id="number" style="color: lightgray;">1</div>

    <button id="muteButton"></button>

    <script>        
        let number = 1;
        let currentColor = null;
        let previousColor = null
        const numberElement = document.getElementById('number');
        const muteButton = document.getElementById('muteButton');

        const colors = ["red", "blue", "green", "white", "orange", "brown", "pink", "yellow"];

        function getNewColor() {
            let newColor;
            do {
                const randomIndex = Math.floor(Math.random() * colors.length);
                newColor = colors[randomIndex];
            } while (newColor === currentColor || newColor === previousColor);
            return newColor;
        }

        // Get stored value, default to false if not found or 'false'
        let isMuted = localStorage.getItem('isMuted') === 'true';
        // Initialize the mute button icon based on the loaded state
        if (isMuted) {
            muteButton.textContent = 'ðŸ”‡'; // Muted icon
        } else {
            muteButton.textContent = 'ðŸ”Š'; // Unmuted icon
        }


        // Initialize Web Speech API
        const synth = window.speechSynthesis;
        let utterance = new SpeechSynthesisUtterance();

        // Function to speak the current value
        function speaker() {
            if (!isMuted) { // Only speak if not muted
                if (synth.speaking) {
                    synth.cancel(); // Stop any ongoing speech
                }
                utterance.text = numberElement.textContent;
                synth.speak(utterance);
            }
        }

        // Toggle mute state and update button icon
        function toggleMute() {
            isMuted = !isMuted; // Flip the state
            // Store as string 'true' or 'false'
            localStorage.setItem('isMuted', isMuted);

            if (isMuted) {
                muteButton.textContent = 'ðŸ”‡'; // Muted icon
                if (synth.speaking) {
                    synth.cancel(); // Stop any speech if muting mid-speech
                }
            } else {
                muteButton.textContent = 'ðŸ”Š'; // Unmuted icon
                // speak the current letter when unmuting
                speaker();
            }
        }

        function incrementNumber() {
            number++;
            numberElement.textContent = number;
            previousColor = currentColor;
            currentColor = getNewColor();
            numberElement.style.color = currentColor;
            speaker();
        }

        // Increment on pressing space and Enter key
        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space' || event.code === 'Enter') {
                incrementNumber();
            }
        });

                
        // Increment on any click or touch on the body
        document.body.addEventListener('click', incrementNumber);
        document.body.addEventListener('touchstart', function(e) {
            e.preventDefault(); // Prevent default browser behavior (e.g., scrolling with spacebar)
            incrementNumber();
        }, { passive: false });

        muteButton.addEventListener('click', toggleMute);
        muteButton.addEventListener('touchstart', function(e) {
            e.preventDefault();
            toggleMute();
        }, { passive: false });


    </script>
</body>
</html>
